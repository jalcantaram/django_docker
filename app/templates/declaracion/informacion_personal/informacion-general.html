{% extends 'layout/base.html' %}
{% load static %}
{% load bootstrap4 %}
{% load flujo_declaracion %}

{% block content %}
  <div class="container-fluid h-100">
    <div class="row h-100">
      {% include 'layout/sidebar.html' %}
      <div class="col-md-9">
        <nav aria-label="breadcrumb">
          <ol class="breadcrumb text-sm text-uppercase font-weight-extralight">
            <li class="breadcrumb-item"><a href="#" class="text-reset">Declaración en curso</a></li>
            <li class="breadcrumb-item"><a href="#" class="text-reset">Información personal</a></li>
          </ol>
        </nav>
        <h1 class="text-uppercase text-black h5">I. DECLARACIÓN DE SITUACIÓN PATRIMONIAL <span class="text-primary">{% tipo_declaracion %}</span></h1>
        <h2 class="h6 mb-3 text-uppercase">1. DATOS GENERALES</h2>
        {% tipo_declaracion_code as tipo %}
        {% if tipo == 'INICIAL' %}
          <div class="text-blue">
            <h4>En caso de haber aceptado cargar tu información de declaraciones previas, es importante que:</h4>
            <ol style="list-style-type:none;">
              <li>1) Verifiques que los datos sean correctos y elimines cualquier registro duplicado.</li>
              <li>2) Para aquellos registros que no elimines, ingresa y verifica que la información y todos los campos están debidamente llenados y actualizados.</li>
              <li>3) Ingresa la información de aquellos datos generales.</li>
            </ul>
          </div>
        {% elif tipo == 'CONCLUSION' %}
          <div class="text-blue">
            <h4>En caso de haber aceptado cargar tu información de declaraciones previas, es importante que:</h4>
            <ol style="list-style-type:none;">
              <li>1) Verifiques que los datos sean correctos y elimines cualquier registro duplicado.</li>
              <li>2) Para aquellos registros que no elimines, ingresa y verifica que la información y todos los campos están debidamente llenados y actualizados.</li>
              <li>3) Ingresa la información de aquellos datos generales.</li>
            </ul>
          </div>
        {% elif tipo == 'MODIFICACION' %}
          <div class="text-blue">
            <h4>En caso de haber aceptado cargar tu información de declaraciones previas, es importante que:</h4>
            <ol style="list-style-type:none;">
              <li>1) Verifiques que los datos sean correctos y elimines cualquier registro duplicado.</li>
              <li>2) Para aquellos registros que no elimines, ingresa y verifica que la información y todos los campos están debidamente llenados y actualizados.</li>
              <li>3) Ingresa la información de aquellos datos generales.</li>
            </ul>
          </div>
        {% endif %}
        <br>
        {% if cat_tipos_declaracion %}
        <form class="areyousure"action="{% url 'declaracion:informacion-general' cat_tipos_declaracion %}" method="post">
          {% endif %}
          {% if folio_declaracion %}
          <form class="areyousure"action="{% url 'declaracion:informacion-general' folio_declaracion %}" method="post">
            {% endif %}
            {% csrf_token %}
            {{ declaracion }}
            <input type="hidden" name="var-es_fisica" value="True">
            <div class="row">
              <div class="col-md-4">
                <div class="form-group">
                  <label for="nombre2" class="label-secondary">NOMBRE(S)<span class="text-danger text-lg font-weight-bold">*</span> </label>
                  <button type="button" class="btn btn-link p-0 btn-information" data-toggle="tooltip" tabindex="9999" title="Sin abreviaturas, sin acentos, ni signos especiales.">
                    <img src="{% static 'src/img/info.svg'%}" alt="info" class="svg">
                  </button>
                  {% bootstrap_field info_personal_var.nombres show_label=False%}
                </div>
              </div>
              <div class="col-md-4">
                <div class="form-group">
                  <label for="apellido1_2" class="label-secondary">PRIMER APELLIDO<span class="text-danger text-lg font-weight-bold">*</span></label>
                  <button type="button" class="btn btn-link p-0 btn-information" data-toggle="tooltip" tabindex="9999" title="Sin abreviaturas, sin acentos, ni signos especiales.">
                    <img src="{% static 'src/img/info.svg'%}" alt="info" class="svg">
                  </button>
                  {% bootstrap_field info_personal_var.apellido1 show_label=False placeholder="Primer apellido" %}
                </div>
              </div>
              <div class="col-md-4">
                <div class="form-group">
                  <label for="apellido2_2" class="label-secondary">SEGUNDO APELLIDO<small class="text-help text-primary">(En caso de no tener poner X)</small></label>
                  <button type="button" class="btn btn-link p-0 btn-information" data-toggle="tooltip" tabindex="9999" title="Sin abreviaturas, sin acentos, ni signos especiales y en caso de no tener poner X”">
                    <img src="{% static 'src/img/info.svg'%}" alt="info" class="svg">
                  </button>
                  {% bootstrap_field info_personal_var.apellido2 show_label=False placeholder="Segundo apellido" %}
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-md-4">
                <div class="form-group">
                  <label for="curp" class="label-secondary">CURP<span class="text-danger text-lg font-weight-bold">*</span></label>
                  <button type="button" class="btn btn-link p-0 btn-information" data-toggle="tooltip" tabindex="9999" title="Los 18 caracteres de la Clave Única de Registro de Población.">
                    <img src="{% static 'src/img/info.svg'%}" alt="info" class="svg">
                  </button>
                  {% bootstrap_field info_personal_var.curp field_class='valida_curp' show_label=False placeholder="CURP" %}
                </div>
              </div>
              <div class="col-md-4">
                <div class="form-group">
                  <label for="{{ info_personal_var.rfc.id_for_label }}" class="label-secondary">RFC CON HOMOCLAVE <span class="text-danger text-lg font-weight-bold">*</span></label>
                  <button type="button" class="btn btn-link p-0 btn-information" data-toggle="tooltip" tabindex="9999" title="Los 10 caracteres básicos y los 3 caracteres de la homoclave. Si es una persona moral son 9 caracteres básicos y los 3 de la homoclave.">
                    <img src="{% static 'src/img/info.svg'%}" alt="info" class="svg">
                  </button>
                  <div class="form-group">
                    <label class="sr-only" for="{{ info_personal_var.rfc.id_for_label }}">Rfc</label>
                    <div class="valida_rfc_fisica">
                      <input type="text" name="{{ info_personal_var.rfc.html_name }}" value="{{ info_personal_var.rfc.value }}" maxlength="255" class="form-control" placeholder="RFC CON HOMOCLAVE" title="" id="{{ info_personal_var.rfc.id_for_label }}" readonly>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-md-4">
                <div class="form-group">
                  <label for="correo" class="label-secondary">CORREO ELECTRÓNICO INSTITUCIONAL <small class="text-help text-primary">(si aplica)</small></label>
                  <button type="button" class="btn btn-link p-0 btn-information" data-toggle="tooltip" tabindex="9999" title="ejemplo@emplo.com">
                    <img src="{% static 'src/img/info.svg'%}" alt="info" class="svg">
                  </button>
                  {% bootstrap_field info_personal_var.email_laboral field_class='valida_email' show_label=False placeholder="Correo electrónico laboral" %}
                </div>
              </div>
              <div class="col-md-4">
                <div class="form-group">
                  <label for="correo" class="label-secondary">CORREO ELECTRÓNICO PERSONAL/ALTERNO<span class="text-danger text-lg font-weight-bold">*</span></label>
                  <button type="button" class="btn btn-link p-0 btn-information" data-toggle="tooltip" tabindex="9999" title="ejemplo@emplo.com">
                    <img src="{% static 'src/img/info.svg'%}" alt="info" class="svg">
                  </button>
                  {% bootstrap_field info_personal_var.email_personal field_class='valida_email' show_label=False placeholder="Correo electrónico personal" %}
                </div>
              </div>
              <div class="col-md-4">
                <div class="form-group">
                  <label for="telefono-particular" class="label-secondary">NÚMERO TELEFÓNICO DE CASA</label>
                  <button type="button" class="btn btn-link p-0 btn-information" data-toggle="tooltip" tabindex="9999" title="Número a 10 dígitos.">
                    <img src="{% static 'src/img/info.svg'%}" alt="info" class="svg">
                  </button>
                  {% bootstrap_field info_personal_var.tel_particular show_label=False placeholder="Teléfono particular" field_class="valida_telefono" %}
                </div>
              </div>
              <div class="col-md-4">
                <div class="form-group">
                  <label for="telefono-celular" class="label-secondary">NÚMERO CELULAR PERSONAL</label>
                  <button type="button" class="btn btn-link p-0 btn-information" data-toggle="tooltip" tabindex="9999" title="Número a 10 dígitos.">
                    <img src="{% static 'src/img/info.svg'%}" alt="info" class="svg">
                  </button>
                  {% bootstrap_field info_personal_var.tel_movil show_label=False placeholder="Teléfono celular" field_class="valida_telefono" %}
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-md-4">
                <label class="label-secondary mb-2">SITUACIÓN PERSONAL/ESTADO CIVIL<span class="text-danger text-lg font-weight-bold">*</span></label>
                <button type="button" class="btn btn-link p-0 btn-information" data-toggle="tooltip" tabindex="9999" title="Seleccionar situación personal.">
                  <img src="{% static 'src/img/info.svg'%}" alt="info" class="svg">
                </button>
                {% bootstrap_field info_personal_var.cat_estados_civiles field_class="single-estados_civiles" show_label=False%}
              </div>
              <div class="col-md-12" id="id_regimen_matrimonial">
                <label class="label-secondary mb-2">RÉGIMEN MATRIMONIAL<span class="text-danger text-lg font-weight-bold">*</span></label>
                <button type="button" class="btn btn-link p-0 btn-information" data-toggle="tooltip" tabindex="9999" title="Sector el tipo de Régimen matrimonial.">
                  <img src="{% static 'src/img/info.svg'%}" alt="info" class="svg">
                </button>
                <div class="row">
                  <div class="col-md-4">
                    {% bootstrap_field info_personal_var.cat_regimenes_matrimoniales show_label=False %}
                  </div>
                  <div class="col-md-3">
                    {% bootstrap_field info_personal_var.otro_estado_civil show_label=False %}
                  </div>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-md-5">
                <div class="form-group">
                  <label for="pais" class="label-secondary">PAÍS DE NACIMIENTO<span class="text-danger text-lg font-weight-bold">*</span></label>
                  <button type="button" class="btn btn-link p-0 btn-information" data-toggle="tooltip" tabindex="9999" title="País de Nacimiento del Declarante.">
                    <img src="{% static 'src/img/info.svg'%}" alt="info" class="svg">
                  </button>
                  {% bootstrap_field info_personal_var.cat_pais field_class="pais" show_label=False%}
                </div>
              </div>
              <div class="col-md-5">
                <div class="form-group">
                  <label for="nacionalidad" class="label-secondary">NACIONALIDAD(ES)<span class="text-danger text-lg font-weight-bold">*</span></label>
                  <button type="button" class="btn btn-link p-0 btn-information" data-toggle="tooltip" tabindex="9999" title="Nacionalidad(es) del Declarante.">
                    <img src="{% static 'src/img/info.svg'%}" alt="info" class="svg">
                  </button>
                  {% bootstrap_field info_personal_var.nacionalidades field_class="multiples-nacionalidades" show_label=False%}
                </div>
              </div>
              <div class="col d-flex align-items-center">
                <button type="button" class="btn btn-primary rounded-circle btn-plus agregar-nacionalidad">&#43;</button>
              </div>
            </div>
            <div class="row">
              {% tipo_declaracion_code as tipo%}
              {% if tipo == 'MODIFICACION' %}
                <div class="col-md-6 mb-2">
                  {% include 'elementos/label.html' with text_label="¿Te desempeñaste como servidor público el año inmediato anterior?" title_button="Seleccionar si/no" is_required=False %}
                  <div class="row">
                    <div class="col-auto">
                      <div class="custom-control custom-radio custom-control-inline radio-secondary">
                        <input type="radio" id="{{ info_personal_var.activo_anio_anterior.id_for_label }}" name="var-{{ info_personal_var.activo_anio_anterior.name }}" class="custom-control-input" value="true"  {% if info_personal_var.activo_anio_anterior.initial == 1 %} checked {% endif %}>
                        <label class="custom-control-label text-rg" for="{{ info_personal_var.activo_anio_anterior.id_for_label }}">Sí</label>
                      </div>
                    </div>
                    <div class="col-auto">
                      <div class="custom-control custom-radio custom-control-inline radio-secondary">
                        <input type="radio" id="{{ info_personal_var.activo_anio_anterior.id_for_label }}1" name="var-{{ info_personal_var.activo_anio_anterior.name }}" class="custom-control-input" value="false" {% if info_personal_var.activo_anio_anterior.initial == 0 %} checked {% endif %}>
                        <label class="custom-control-label text-rg" for="{{ info_personal_var.activo_anio_anterior.id_for_label }}1">No</label>
                      </div>
                    </div>
                  </div>
                </div>
              {% endif %}
            </div>
            <div class="row">
              <div class="col-12">
                <label class="label-secondary mb-2">ACLARACIONES/OBSERVACIONES</label>
                <button type="button" class="btn btn-link p-0 btn-information" data-toggle="tooltip" tabindex="9999" title="Aclaraciones y Observaciones">
                  <img src="{% static 'src/img/info.svg'%}" alt="info" class="svg">
                </button>
                {% bootstrap_field observaciones.observacion show_label=False placeholder="Aclaraciones y Observaciones" %}
              </div>
            </div>
            {% include 'layout/guardar.html' %}
          </form>
      </div>
    </div>
  </div>
  {% if prev_declaracion %}
    {% tipo_declaracion_code as tipo %}
    <div class="modal fade" id="modal-recuperar-declaracion" tabindex="-1" role="dialog" aria-hidden="true"  data-backdrop="static" data-keyboard="false">
      <div class="modal-dialog modal-dialog-centered modal-md" role="document">
        <div class="modal-content">
          <div class="modal-body text-center">
            <p class="text-lg w-75 mb-7 mx-auto">¿DESEAS CARGAR LA INFORMACIÓN DE TU ANTERIOR DECLARACIÓN?<br/><br/>
              <br>
              <a href="{% url 'declaracion:declaracion-recuperar' tipo %}" class="btn btn-success-lighter" id="migrarInformacion">
                <span class="texto-chico-boton">SI, CARGAR INFORMACIÓN</span>
              </a>
              <button type="button" class="btn btn-secondary" data-dismiss="modal" aria-label="Close">
                No
              </button>
            </p>
          </div>
        </div>
      </div>
    </div>
  {% endif %}
{% endblock %}

{% block js %}
  <script src="{% static 'select2/i18n/es.js' %}"></script>
  <script>
    var mhref = document.getElementById('migrarInformacion');
    if(mhref){
      mhref.addEventListener('click', function (e) {
        let hrefClass = this.classList.add('disabled');
      });
    }
  </script>
{% endblock %}
